From cbbc2d349519f41d5946fc0aa5e2cd46ae4b433d Mon Sep 17 00:00:00 2001
From: Suman Kumar <suman@inforcecomputing.com>
Date: Tue, 25 Jun 2013 13:08:46 -0700
Subject: [PATCH 29/44] camera: minor: resolved macros to fix build breaks

Change-Id: Ia571e93d0354e35d7b6273f8b01ccb5c7817bb06
Signed-off-by: Suman Kumar <suman@inforcecomputing.com>
---
 arch/arm/mach-msm/include/mach/camera.h |    3 +++
 drivers/media/video/Kconfig             |    4 +++-
 drivers/media/video/videobuf2-msm-mem.c |    4 ++--
 3 files changed, 8 insertions(+), 3 deletions(-)

diff --git a/arch/arm/mach-msm/include/mach/camera.h b/arch/arm/mach-msm/include/mach/camera.h
index 423d319..fe32ba2 100644
--- a/arch/arm/mach-msm/include/mach/camera.h
+++ b/arch/arm/mach-msm/include/mach/camera.h
@@ -27,7 +27,10 @@
 #include <linux/msm_ion.h>
 #include <mach/iommu_domains.h>
 
+#ifndef CONFIG_MSM_CAMERA_DEBUG
 #define CONFIG_MSM_CAMERA_DEBUG
+#endif
+
 #ifdef CONFIG_MSM_CAMERA_DEBUG
 #define CDBG(fmt, args...) pr_debug(fmt, ##args)
 #else
diff --git a/drivers/media/video/Kconfig b/drivers/media/video/Kconfig
index ae020e8..3520279 100644
--- a/drivers/media/video/Kconfig
+++ b/drivers/media/video/Kconfig
@@ -1188,6 +1188,7 @@ menuconfig MSM_CAMERA
 	  Say Y here to enable selecting the video adapters for
 	  Qualcomm msm camera and video encoding
 
+if MSM_CAMERA
 config MSM_CAMERA_DEBUG
 	bool "Qualcomm MSM camera debugging with printk"
 	depends on MSM_CAMERA
@@ -1195,9 +1196,10 @@ config MSM_CAMERA_DEBUG
 	help
 	  Enable printk() debug for msm camera
 
-
 source "drivers/media/video/msm/Kconfig"
 
+endif # MSM_CAMERA
+
 endif # V4L_PLATFORM_DRIVERS
 endif # VIDEO_CAPTURE_DRIVERS
 
diff --git a/drivers/media/video/videobuf2-msm-mem.c b/drivers/media/video/videobuf2-msm-mem.c
index c1a392e2..d5bd4c0 100644
--- a/drivers/media/video/videobuf2-msm-mem.c
+++ b/drivers/media/video/videobuf2-msm-mem.c
@@ -300,8 +300,8 @@ static int msm_vb2_mem_ops_mmap(void *buf_priv, struct vm_area_struct *vma)
 	vma->vm_private_data = mem;
 
 	D("mmap %p: %08lx-%08lx (%lx) pgoff %08lx\n",
-		map, vma->vm_start, vma->vm_end,
-		(long int)mem->bsize, vma->vm_pgoff);
+		mem, vma->vm_start, vma->vm_end,
+		(long int)mem->size, vma->vm_pgoff);
 	videobuf2_vm_open(vma);
 	return 0;
 error:
-- 
1.7.9.5

