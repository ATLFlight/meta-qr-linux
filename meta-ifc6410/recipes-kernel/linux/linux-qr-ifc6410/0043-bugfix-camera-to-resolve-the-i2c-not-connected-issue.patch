From 15f9b4034bb3cfd72d0f0748966031d164a44b85 Mon Sep 17 00:00:00 2001
From: Suman Kumar <suman@inforcecomputing.com>
Date: Tue, 15 Oct 2013 13:45:35 +0530
Subject: [PATCH 43/44] bugfix: camera: to resolve the i2c not connected issue

Change-Id: I1ea464d62d9790e7505229ec5f199c18d701d72e
---
 arch/arm/mach-msm/board-8064-camera.c  |    2 ++
 arch/arm/mach-msm/board-8064-gpiomux.c |    7 +++++++
 arch/arm/mach-msm/devices-8064.c       |    2 ++
 3 files changed, 11 insertions(+)

diff --git a/arch/arm/mach-msm/board-8064-camera.c b/arch/arm/mach-msm/board-8064-camera.c
index 51fd1eb..f9ce884 100644
--- a/arch/arm/mach-msm/board-8064-camera.c
+++ b/arch/arm/mach-msm/board-8064-camera.c
@@ -422,6 +422,8 @@ static struct gpio apq8064_common_cam_gpio[] = {
 
 static struct gpio apq8064_back_cam_gpio[] = {
 	{5, GPIOF_DIR_IN, "CAMIF_MCLK"},
+	{10, GPIOF_DIR_IN, "PRICAM_I2C4_DATA"},
+	{11, GPIOF_DIR_IN, "PRICAM_I2C4_CLK"},
 	{CAML_RSTN, GPIOF_DIR_OUT, "CAM_RESET"},
 };
 
diff --git a/arch/arm/mach-msm/board-8064-gpiomux.c b/arch/arm/mach-msm/board-8064-gpiomux.c
index e10d33b..627ec01 100644
--- a/arch/arm/mach-msm/board-8064-gpiomux.c
+++ b/arch/arm/mach-msm/board-8064-gpiomux.c
@@ -152,6 +152,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[1],
 		}
 	},
+#ifndef CONFIG_OV5640
 	{
 		.gpio = 23,
 		.settings = {
@@ -159,6 +160,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[2],
 		}
 	},
+#endif
 	{
 		.gpio = 19,
 		.settings = {
@@ -166,6 +168,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[8],
 		}
 	},
+#ifndef CONFIG_OV5640
 	{
 		.gpio = 22,
 		.settings = {
@@ -173,6 +176,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[2],
 		}
 	},
+#endif
 	{
 		.gpio = 21,
 		.settings = {
@@ -194,6 +198,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[9],
 		}
 	},
+#ifndef CONFIG_OV5640
 	{
 		.gpio = 11,
 		.settings = {
@@ -201,6 +206,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[10],
 		}
 	},
+
 	{
 		.gpio = 10,
 		.settings = {
@@ -208,6 +214,7 @@ struct msm_gpiomux_config vcap_configs[] = {
 			[GPIOMUX_ACTIVE] =		&gpio_vcap_config[9],
 		}
 	},
+#endif
 	{
 		.gpio = 9,
 		.settings = {
diff --git a/arch/arm/mach-msm/devices-8064.c b/arch/arm/mach-msm/devices-8064.c
index 8aa1237..0f94f3b 100755
--- a/arch/arm/mach-msm/devices-8064.c
+++ b/arch/arm/mach-msm/devices-8064.c
@@ -307,6 +307,7 @@ static struct resource resources_qup_i2c_gsbi4[] = {
 		.end	= GSBI4_QUP_IRQ,
 		.flags	= IORESOURCE_IRQ,
 	},
+#ifndef CONFIG_OV5640
 	{
 		.name	= "i2c_clk",
 		.start	= 11,
@@ -319,6 +320,7 @@ static struct resource resources_qup_i2c_gsbi4[] = {
 		.end	= 10,
 		.flags	= IORESOURCE_IO,
 	},
+#endif
 };
 
 struct platform_device apq8064_device_qup_i2c_gsbi4 = {
-- 
1.7.9.5

