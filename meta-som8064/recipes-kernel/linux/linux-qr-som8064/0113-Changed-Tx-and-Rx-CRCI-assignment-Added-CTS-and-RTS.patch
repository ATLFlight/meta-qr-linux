From 3cdea1f96daf9567c608434b9962ec5fae8db6f6 Mon Sep 17 00:00:00 2001
From: Simon Teplitsky <simont@codeaurora.org>
Date: Fri, 4 Apr 2014 19:07:23 -0700
Subject: [PATCH] Changed Tx and Rx CRCI assignment. Added CTS and RTS lines to
  gsbi_configs[].

---
 arch/arm/mach-msm/board-8064-gpiomux.c | 13 ++++++++++++-
 arch/arm/mach-msm/include/mach/dma.h   |  4 ++--
 2 files changed, 14 insertions(+), 3 deletions(-)

diff --git a/arch/arm/mach-msm/board-8064-gpiomux.c b/arch/arm/mach-msm/board-8064-gpiomux.c
index 9edb94a..fe3e06a 100644
--- a/arch/arm/mach-msm/board-8064-gpiomux.c
+++ b/arch/arm/mach-msm/board-8064-gpiomux.c
@@ -784,7 +784,18 @@ static struct msm_gpiomux_config apq8064_gsbi_configs[] __initdata = {
 			[GPIOMUX_SUSPENDED] = &gsbi1_uart_config,
 		},
 	},
-
+        {
+                .gpio      = 20,                /* GSBI1 UART CTS */
+                .settings = {
+                        [GPIOMUX_SUSPENDED] = &gsbi1_uart_config,
+                },
+        },
+        {
+                .gpio      = 21,                /* GSBI1 UART RFR */
+                .settings = {
+                        [GPIOMUX_SUSPENDED] = &gsbi1_uart_config,
+                },
+        },
 #if defined(CONFIG_KS8851) || defined(CONFIG_KS8851_MODULE)
 	{
 		.gpio      = 51,		/* GSBI5 QUP SPI_DATA_MOSI */
diff --git a/arch/arm/mach-msm/include/mach/dma.h b/arch/arm/mach-msm/include/mach/dma.h
index 4e5b762..25a7994 100644
--- a/arch/arm/mach-msm/include/mach/dma.h
+++ b/arch/arm/mach-msm/include/mach/dma.h
@@ -274,10 +274,10 @@ int msm_dmov_exec_cmd(unsigned id, unsigned int cmdptr);
 
 /* channels for APQ8064 SOM*/
 #define DMOV_APQ8064_SOM_HSUART_GSBI1_TX_CHAN	11
-#define DMOV_APQ8064_SOM_HSUART_GSBI1_TX_CRCI	8
+#define DMOV_APQ8064_SOM_HSUART_GSBI1_TX_CRCI	13
 
 #define DMOV_APQ8064_SOM_HSUART_GSBI1_RX_CHAN	10
-#define DMOV_APQ8064_SOM_HSUART_GSBI1_RX_CRCI	7
+#define DMOV_APQ8064_SOM_HSUART_GSBI1_RX_CRCI	12
 
 /* channels for APQ8064 SGLTE*/
 #define DMOV_APQ8064_HSUART_GSBI4_TX_CHAN	11
-- 
1.8.2.1

